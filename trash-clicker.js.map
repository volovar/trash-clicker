{"version":3,"sources":["app/game.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA/LA;AAAA","file":"public/trash-clicker.js","sourcesContent":["(function() {\n    'use strict';\n\n    var game = document.getElementById('js-game');\n    var score = document.getElementById('js-score');\n    var scoreCounter = 0;\n    var pauseButton = document.getElementById('js-pause');\n    var paused;\n    var mainLoop;\n    var trashButton = document.getElementById('js-trash-button');\n    var store = document.getElementById('js-item-store');\n    var items = document.getElementsByClassName('js-item');\n    var itemList = [];\n\n    var ShopItem = function (title, description, price, type) {\n        this.title = title;\n        this.desc = description;\n        this.price = price;\n        this.purchased = 0;\n        this.type = type;\n        this.speed = 1000;\n    };\n\n    ShopItem.prototype.incrementPurchased = function () {\n        this.purchased++;\n    }\n\n    var raccoon = new ShopItem('Raccoon', 'A feisty little creature that will get in your trash', 10, 'raccoon');\n    var garbagePerson = new ShopItem('Garbage Person', 'This person comes to take your trash away', 100, 'gperson');\n    var oscar = new ShopItem('Oscar, a grouch', 'A very unpleasant monster who wants to live in the trash', 500, 'grouch');\n\n    itemList.push(raccoon);\n    itemList.push(garbagePerson);\n    itemList.push(oscar);\n\n    startGame();\n\n    for (var i = 1; i <= itemList.length; i++) {\n        var title = createElement('h3', itemList[i - 1].title, '', 'item-name');\n        var price = createElement('span', itemList[i - 1].price, '', 'item-price');\n        var description = createElement('p', itemList[i - 1].desc, '', 'item-desc');\n        var purchased = createElement('span', itemList[i - 1].purchased, '', 'item-purchased');\n        var li = createElement('li', '', itemList[i - 1].type, ['js-item', 'item', 'item-disabled']);\n\n        li.appendChild(title);\n        li.appendChild(price);\n        li.appendChild(description);\n        li.appendChild(purchased);\n        store.appendChild(li);\n    }\n\n    for (var i = 1; i <= items.length; i++) {\n        items[i - 1].addEventListener('click', function (e) {\n            purchaseItem(e, this, this.dataset.itemType);\n        });\n    }\n\n    trashButton.addEventListener('click', function (e) {\n        e.preventDefault();\n        scoreCounter += 1;\n    });\n\n    pauseButton.addEventListener('click', function (e) {\n        e.preventDefault();\n\n        if (paused) {\n            startGame();\n            e.target.innerHTML = 'Pause';\n        } else {\n            pauseGame();\n            e.target.innerHTML = 'Paused';\n        }\n    });\n\n    function purchaseItem (e, node, type) {\n        var children = node.children;\n        var child;\n\n        for (var i = 0; i < children.length; i++) {\n            if (children[i].className = 'item-purchased') {\n                child = children[i];\n            }\n        }\n\n        for (var i = 1; i <= itemList.length; i++) {\n            var item = itemList[i - 1];\n\n            if (item.type == type) {\n                if (scoreCounter >= item.price) {\n                    item.purchased += 1;\n                    child.innerHTML = item.purchased;\n                    scoreCounter -= item.price;\n                }\n            }\n        }\n    }\n\n    function createElement (elem, elemContent, elemData, elemClass, elemId) {\n        var newElem = document.createElement(elem);\n\n        newElem.innerHTML = elemContent;\n\n        if (elemData) {\n            newElem.dataset.itemType = elemData;\n        }\n\n        if (elemId) {\n            newElem.id = elemId;\n        }\n\n        if (elemClass) {\n            if (Array.isArray(elemClass)) {\n                for (var i = 1; i <= elemClass.length; i++) {\n                    newElem.className += ' ' + elemClass[i - 1];\n                }\n            } else {\n                newElem.className = elemClass;\n            }\n        }\n\n        return newElem;\n    }\n\n    function startGame () {\n        mainLoop = setInterval(function () {\n            gameLoop();\n        }, 60);\n    }\n\n    function pauseGame () {\n        clearInterval(mainLoop);\n        paused = true;\n    }\n\n    function gameLoop () {\n        paused = false;\n        score.innerHTML = scoreCounter;\n        setAutoClick();\n        checkItemAvailable();\n\n        for (var i = 1; i <= itemList.length; i++) {\n            var item = itemList[i - 1];\n        }\n    }\n\n    function checkItemAvailable () {\n        var listItems = document.getElementsByClassName('item');\n\n        for (var i = 0; i < itemList.length; i++) {\n            var item = itemList[i];\n\n            if (scoreCounter >= item.price) {\n                for (var j = 0; j < listItems.length; j++) {\n                    if (listItems[j].dataset.itemType === item.type) {\n                        listItems[j].classList.remove('item-disabled');\n                    }\n                }\n            } else {\n                for (var j = 0; j < listItems.length; j++) {\n                    if (listItems[i].dataset.itemType === item.type) {\n                        listItems[i].classList.add('item-disabled');\n                    }\n                }\n            }\n        }\n    }\n\n    function setAutoClick () {\n        for (var i = 1; i <= itemList.length; i++) {\n            var item = itemList[i - 1];\n\n            if (item.purchased > 0) {\n                switch (item.type) {\n                    case 'raccoon':\n                        addClicker(1, item.purchased);\n                        break;\n                    case 'gperson':\n                        addClicker(10, item.purchased);\n                        break;\n                    case 'grouch':\n                        addClicker(25, item.purchased);\n                        break;\n                }\n            }\n        }\n    }\n\n    function addClicker (ability, total) {\n        scoreCounter += (ability * total) / 50;\n    }\n\n}());"]}